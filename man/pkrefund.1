.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
.TH PKREFUND "1" "May 2009" "C@LL - Conseil Internet & Logiciels Libres" "User Commands"
.SH NAME
pkrefund \- manual page for pkrefund 1.26_fixes_official
.SH DESCRIPTION
pkrefund v1.26_fixes_official (c) 2003, 2004, 2005, 2006, 2007 Jerome Alet \- alet@librelogiciel.com
.PP
Refunds jobs.
.PP
command line usage :
.IP
pkrefund [options] [filterexpr]
.PP
options :
.TP
\fB\-v\fR | \fB\-\-version\fR
Prints pkrefund's version number then exits.
.TP
\fB\-h\fR | \fB\-\-help\fR
Prints this message then exits.
.TP
\fB\-f\fR | \fB\-\-force\fR
Doesn't ask for confirmation before refunding jobs.
.TP
\fB\-r\fR | \fB\-\-reason\fR txt
Sets textual information to explain the refunding.
.TP
\fB\-l\fR | \fB\-\-logo\fR img
Use the image as the receipt's logo. The logo will
be drawn at the center top of the page. The default
logo is /usr/share/pykota/logos/pykota.jpeg
.TP
\fB\-p\fR | \fB\-\-pagesize\fR sz
Sets sz as the page size. Most well known
page sizes are recognized, like 'A4' or 'Letter'
to name a few. The default size is A4.
.TP
\fB\-n\fR | \fB\-\-number\fR N
Sets the number of the first receipt. This number
will automatically be incremented for each receipt.
.TP
\fB\-o\fR | \fB\-\-output\fR f.pdf
Defines the name of the PDF file which will contain
the receipts. If not set, then no PDF file will
be created. If set to '\-', then \fB\-\-force\fR is assumed,
and the PDF document is sent to standard output.
.TP
\fB\-u\fR | \fB\-\-unit\fR u
Defines the name of the unit to use on the receipts.
The default unit is 'Credits', optionally translated
to your native language if it is supported by PyKota.
.IP
Use the filter expressions to extract only parts of the
datas. Allowed filters are of the form :
.IP
key=value
.IP
Allowed keys for now are :
.TP
username
User's name
.TP
printername
Printer's name
.TP
hostname
Client's hostname
.TP
jobid
Job's Id
.TP
billingcode
Job's billing code
.TP
start
Job's date of printing
.TP
end
Job's date of printing
.IP
Dates formatting with 'start' and 'end' filter keys :
.IP
YYYY : year boundaries
YYYYMM : month boundaries
YYYYMMDD : day boundaries
YYYYMMDDhh : hour boundaries
YYYYMMDDhhmm : minute boundaries
YYYYMMDDhhmmss : second boundaries
yesterday[+\-NbDays] : yesterday more or less N days (e.g. : yesterday\-15)
today[+\-NbDays] : today more or less N days (e.g. : today\-15)
tomorrow[+\-NbDays] : tomorrow more or less N days (e.g. : tomorrow\-15)
now[+\-NbDays] : now more or less N days (e.g. now\-15)
.IP
\&'now' and 'today' are not exactly the same since today represents the first
or last second of the day depending on if it's used in a start= or end=
date expression. The utility to be able to specify dates in the future is
a question which remains to be answered :\-)
.IP
Contrary to other PyKota management tools, wildcard characters are not
expanded, so you can't use them.
.PP
Examples :
.IP
\f(CW$ pkrefund --output /tmp/receipts.pdf jobid=503\fR
.IP
This will refund all jobs which Id is 503. BEWARE : installing CUPS
afresh will reset the first job id at 1, so you probably want to use
a more precise filter as explained below. A confirmation will
be asked for each job to refund, and a PDF file named /tmp/receipts.pdf
will be created which will contain printable receipts.
.IP
\f(CW$ pkrefund --reason "Hardware problem" jobid=503 start=today-7\fR
.IP
Refunds all jobs which id is 503 but which were printed during the
past week. The reason will be marked as being an hardware problem.
.IP
\f(CW$ pkrefund --force username=jerome printername=HP2100\fR
.IP
Refunds all jobs printed by user jerome on printer HP2100. No
confirmation will be asked.
.IP
\f(CW$ pkrefund --force printername=HP2100 start=200602 end=yesterday\fR
.IP
Refunds all jobs printed on printer HP2100 between February 1st 2006
and yesterday. No confirmation will be asked.
.PP
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.
.PP
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
.PP
You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110\-1301, USA.
.PP
Please report bugs to : Jerome Alet \- alet@librelogiciel.com
